#!/usr/bin/env python
#
# Copyright (c) 2009 Matthew Pearson <matthewpearson@gmail.com>.
#
# These scripts are free. There is no warranty; your mileage may vary.
# Visit http://creativecommons.org/licenses/GPL/2.0/ for more details.
#
# $Id: uniq_history,v 1.2 2009/10/21 21:44:00 mdp Exp $
# removes duplicate entries from a history file while preserving order
#

import os
import sys

assert len(sys.argv) == 3, "usage: uniq_history <src> <dst>"

src = open(sys.argv[1], "r")
dst = open(sys.argv[2], "w")

history = []
histSet = set()
newHist = []

history.extend(src.readlines())

while len(history) > 0:
	last = history.pop()
	if last in histSet:
		continue
	newHist.append(last)
	histSet.add(last)

newHist.reverse()
dst.writelines(newHist)

#EOF __TAGGED__
